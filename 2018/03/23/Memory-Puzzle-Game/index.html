<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source"/>


    <link rel="dns-prefetch" href="https://cdn1.lncld.net"/>













    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Memory Puzzle(python&amp;pygame) | 
        
        CongTsang丨Inn
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.ico">
    <link rel="icon" href="/img/favicon.ico">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="CongTsang, 爱狂笑, 中二病, 萌,pygame">
    <meta name="theme-color" content="#5288C6">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/css/material.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/css/style.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #FF9140;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #00A383 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #00A383 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #00A383 !important;
  }

  .toTop {
    background: #FF6400 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #FF6400;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #FF6400;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #FF6400;
  }

  .post-toc a:hover {
    color: #FF9140;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/backgroud.jpg);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 500ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/css/material-icons.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/js/jquery.min.js", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="CongTsang丨Inn">
    <meta name="msapplication-starturl" content="http://congtsang.com/2018/03/23/Memory-Puzzle-Game/">
    <meta name="msapplication-navbutton-color" content="#5288C6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="CongTsang丨Inn">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.ico">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://congtsang.com/2018/03/23/Memory-Puzzle-Game/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Memory Puzzle(python&amp;pygame) | CongTsang丨Inn">
    <meta property="og:image" content="/img/favicon.ico">
    <meta property="og:description" content="">
    <meta property="og:article:tag" content="pygame"> 

    
        <meta property="article:published_time" content="Fri Mar 23 2018 10:23:34 GMT+0800">
        <meta property="article:modified_time" content="Fri Mar 23 2018 21:56:53 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://congtsang.com/2018/03/23/Memory-Puzzle-Game/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://congtsang.com/2018/03/23/Memory-Puzzle-Game/index.html",
    "headline": "Memory Puzzle(python&pygame)",
    "datePublished": "Fri Mar 23 2018 10:23:34 GMT+0800",
    "dateModified": "Fri Mar 23 2018 21:56:53 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "CongTsang",
        "image": {
            "@type": "ImageObject",
            "url": "https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/avatar.jpg"
        },
        "description": "爱狂笑的孩子运气不会差"
    },
    "publisher": {
        "@type": "Organization",
        "name": "CongTsang丨Inn",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.ico"
        }
    },
    "keywords": ",pygameCongTsang, 爱狂笑, 中二病, 萌",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?fe26ec7230a6da291c726704aeb5ef02';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-text">下一个记忆大师就是你！</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Memory-Puzzle-玩法"><span class="post-toc-text">#Memory Puzzle 玩法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编码风格"><span class="post-toc-text">#编码风格</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#声明与导入"><span class="post-toc-text">@声明与导入</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#远离幻数"><span class="post-toc-text">@远离幻数</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用assert语句"><span class="post-toc-text">@使用assert语句</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#好看的代码"><span class="post-toc-text">@好看的代码</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用常量"><span class="post-toc-text">@使用常量</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#够多的图案"><span class="post-toc-text">@够多的图案</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#关于全局变量"><span class="post-toc-text">@关于全局变量</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#主函数"><span class="post-toc-text">#主函数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#数据结构"><span class="post-toc-text">@数据结构</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#开始游戏动画"><span class="post-toc-text">@开始游戏动画</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#游戏主循环"><span class="post-toc-text">@游戏主循环</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#鼠标定位"><span class="post-toc-text">@鼠标定位</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#处理第一次点击"><span class="post-toc-text">@处理第一次点击</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#处理匹配"><span class="post-toc-text">@处理匹配</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#刷新游戏"><span class="post-toc-text">@刷新游戏</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#枝叶辅助函数"><span class="post-toc-text">#枝叶辅助函数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#揭开方块"><span class="post-toc-text">@揭开方块</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#获取所有图标"><span class="post-toc-text">@获取所有图标</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#开始动画"><span class="post-toc-text">@开始动画</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#切割列表"><span class="post-toc-text">@切割列表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#像素转换坐标"><span class="post-toc-text">@像素转换坐标</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#获取左边和顶部"><span class="post-toc-text">@获取左边和顶部</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#遮盖与揭开"><span class="post-toc-text">@遮盖与揭开</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#绘制遮盖方块"><span class="post-toc-text">@绘制遮盖方块</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#获取样式"><span class="post-toc-text">@获取样式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#绘制图案（核心）"><span class="post-toc-text">@绘制图案（核心）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#绘制游戏板"><span class="post-toc-text">@绘制游戏板</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#打高光"><span class="post-toc-text">@打高光</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#判断输赢"><span class="post-toc-text">@判断输赢</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#绘制赢后动画"><span class="post-toc-text">@绘制赢后动画</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#打印文字"><span class="post-toc-text">@打印文字</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#源代码"><span class="post-toc-text">#源代码</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/Memory%20Puzzle/pygame.jpg)">
    
            <p class="article-headline-p">
                Memory Puzzle(python&pygame)
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/avatar.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>CongTsang</strong>
        <span>3月 23, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="https://pan.baidu.com/share/qrcode?w=246&h=246&url=http://congtsang.com/2018/03/23/Memory-Puzzle-Game/">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/pygame/">pygame</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/2018/03/23/Memory-Puzzle-Game/" class="leancloud-views_num" data-flag-title="Memory Puzzle(python&amp;pygame)">
     &nbsp;浏览量
</span>

            </li>
        </a>
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Memory Puzzle(python&amp;pygame)&url=http://congtsang.com/2018/03/23/Memory-Puzzle-Game/index.html&pic=http://congtsang.com/img/favicon.ico&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Memory Puzzle(python&amp;pygame)&url=http://congtsang.com/2018/03/23/Memory-Puzzle-Game/index.html&via=CongTsang" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://congtsang.com/2018/03/23/Memory-Puzzle-Game/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=CongTsang丨Inn&title=Memory Puzzle(python&amp;pygame)&summary=&pics=http://congtsang.com/img/favicon.ico&url=http://congtsang.com/2018/03/23/Memory-Puzzle-Game/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 style="text-align:center">下一个记忆大师就是你！</h2>

<blockquote>
<p>在“色友”一再鄙视下，我开始向大佬妥协，留下了没技术的眼泪。还是感谢一波<a href="https://taifua.com/" target="_blank" rel="noopener">太傅</a>给了我信心好吧，商业互吹！</p>
</blockquote>
<h3 id="Memory-Puzzle-玩法"><a href="#Memory-Puzzle-玩法" class="headerlink" title="#Memory Puzzle 玩法"></a>#Memory Puzzle 玩法</h3><p>&emsp;&emsp;在这个游戏中，顾名思义，玩家要记忆每个方块背后的图案与图案颜色，当玩家点开白色方块（即遮住图案的方块，要是不遮住，还玩个P啊！）如果图案与颜色<strong>相同</strong>，那么判定为<strong>匹配</strong>，即寻找到了一对匹配。当玩家寻找完<strong>全部匹配</strong>图案，那么代表游戏胜利，并且游戏结束。<br>&emsp;&emsp;为了给予玩家提示并且给供时间给玩家记忆图案位置与颜色。开局一条狗，装备靠自己，是兄der就来砍……..咳咳咳，跑错场了。<br>开局一条….职业病职业病，开局向玩家展示全部图案，并且让玩家有时间记忆，之后全部遮盖，游戏就此开始。如果玩家寻找的不是一组匹配的图案，那么白色方块遮住。</p>
<center><img src="https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/Memory%20Puzzle/1-1.png" alt="游戏封面"></center>

<blockquote>
<p>以下基本按照编程顺序讲解，先讲主函数主干，然后修饰其他函数枝叶。</p>
</blockquote>
<h3 id="编码风格"><a href="#编码风格" class="headerlink" title="#编码风格"></a>#编码风格</h3><h4 id="声明与导入"><a href="#声明与导入" class="headerlink" title="@声明与导入"></a>@声明与导入</h4><pre><code class="python"># &quot;Memory Puzzle&quot;
# By CongTsang 543052251@qq.com
# https://congtsang.com/
# Released under a &quot;Simplified BSD&quot; license

import pygame, sys, random
from pygame.locals import *
</code></pre>
<p>&emsp;&emsp;这个是写在顶部，用于声明这个游戏是什么，谁开发了她，以及用户在哪儿可以找到更多信息。并且源代码遵从“Simplified BSD”许可，可以自由复制和分享该游戏。<br>&emsp;&emsp;之后我们<code>import</code>了一些包，是我们开发游戏时需要使用到的组建，其中pygame和sys是一定需要的。例如游戏退出时我们需要sys，摁键触发器我们需要pygame.locals这些诸如此类的包。</p>
<h4 id="远离幻数"><a href="#远离幻数" class="headerlink" title="@远离幻数"></a>@远离幻数</h4><pre><code class="python">window_x = 640
window_y = 480
FPS = 30
revealSpeed = 5
starevealSpeed = 2
boxSize = 50
gapSize = 10
boardWidth = 8
boardHeight = 5

xMargin = int((window_x - (boardWidth * (boxSize + gapSize))) / 2)
yMargin = int((window_y - (boardHeight * (boxSize + gapSize))) / 2)
</code></pre>
<p>&emsp;&emsp;什么是幻数呢，<a href="https://baike.baidu.com/item/%E5%B9%BB%E6%95%B0/22425569" target="_blank" rel="noopener">幻数</a>:把直接使用的常数叫做幻数。不使用幻数可以避免后期大量的更改，省时省力，还不耽误嘿嘿嘿。<br>例如：</p>
<pre><code class="python">windowArea = 640 * 480
......
windowArea = 640 * 480
......
windowArea = 640 * 480
</code></pre>
<p>&emsp;&emsp;如上面这些夸张而不失典型的栗子，当你需要更改windowArea时，是不是要找到全部640 * 480，把他们一一更改，多麻烦。<br>例如：（正解）</p>
<pre><code class="python">window_width = 640
window_height = 480
windowArea = window_width * window_height
.......
windowArea = window_width * window_height
.......
windowArea = window_width * window_height
</code></pre>
<p>&emsp;&emsp;这样我们只需要改第一二行就可以适配全局，多的不说了，假如你觉得没必要，当我没说，你开心就好。追不到不给你嘿嘿嘿的时候就知道难受了。当然幻数并不是全部都需要，过犹而不及的事多了，还得自己权衡利弊，多写写代码就会有体会。</p>
<h4 id="使用assert语句"><a href="#使用assert语句" class="headerlink" title="@使用assert语句"></a>@使用<code>assert</code>语句</h4><pre><code class="python">assert (boardWidth * boardHeight) % 2 == 0, &#39;Board needs to have an even number of boxes for pairs of matches.&#39;
</code></pre>
<p>&emsp;&emsp;<code>assert</code>的作用是预警，顾名思义，在游戏运行前检查比游戏时崩溃要好的多吧。这段意思是表面：我们的匹配总是一对的，因此方块数目应该为<strong>偶数</strong>所以在运行游戏前检查方块数目是否为偶数报错，比游戏中多出一个独立的方块而让游戏崩溃进入死循环好吧。</p>
<h4 id="好看的代码"><a href="#好看的代码" class="headerlink" title="@好看的代码"></a>@好看的代码</h4><pre><code class="python">#            R    G    B
Gray     = (100, 100, 100)
Navyblue = (60,   60, 100)
White    = (255, 255, 255)
Red      = (255,   0,   0)
Green    = (0,   255,   0)
Blue     = (0,     0, 255)
Yellow   = (255, 255,   0)
Orange   = (255, 128,   0)
Purple   = (255,   0, 255)
Cyan     = (0,   255, 255)
</code></pre>
<p>&emsp;&emsp;像这种统一格式的代码是不是很美观，啥？你说不美观。来人拖出去打死！！！！！这样打代码可以使代码变得易读。<br>&emsp;&emsp;我们使用的颜色在后期需要用到，你也可以自定义自己的游戏颜色，并且用<strong>元组</strong>包含起来。什么RGB是啥？来人啊！拖出去打洗！！！！</p>
<blockquote>
<p>RGB就是红色、绿色、蓝色这三色的组合，数值0-255。数值越大浓度越高颜色越深，三色混合就有了我们五彩斑斓的世界。够清晰够明了了把。</p>
</blockquote>
<h4 id="使用常量"><a href="#使用常量" class="headerlink" title="@使用常量"></a>@使用常量</h4><pre><code class="python">Donut = &#39;donut&#39;  # 甜甜圈
Square = &#39;square&#39; # 正方形
Diamond = &#39;diamond&#39; # 钻石
Lines = &#39;lines&#39; # 线条阴影
Oval = &#39;oval&#39; # 椭圆
</code></pre>
<p>&emsp;&emsp;如上面所示，也提到了一点幻数的感觉，基本都是一样的概念，避免后期大量更改，也使代码易读，减少键盘敲击量，因为懒。</p>
<h4 id="够多的图案"><a href="#够多的图案" class="headerlink" title="@够多的图案"></a>@够多的图案</h4><pre><code class="python">allColors = (Red, Green, Blue, Yellow, Orange, Purple, Cyan)
allShapes = (Donut, Square, Diamond, Lines, Oval)
assert len(allColors) * len(allShapes) * 2 &gt;= boardWidth * boardHeight, &#39;Board is too big for the number of shapes/color defined.&#39;
</code></pre>
<p>&emsp;&emsp;为了让游戏拥有足够多的图案和组合图标，我们需要一个元组来保存这些东西。我定义了5个图案和7种颜色，你们可以定义多种颜色，图案的话，如果你知道这些图案怎么画（运用数学知识）那么可以多加一些图案，我数学垃圾就不加了。这里<code>assert</code>用于判断图案乘颜色一共35个组合然后需要一对，就拥有了70个方块空间的游戏板，那么<code>boardWidth、boardHeight</code>相乘需要小于等于70就可以了。游戏才能正常进行。</p>
<blockquote>
<p>关于使用元组问题的话，因为元组不可变，相对于列表就固定比较多了，这是为了程序员知道这是不可变的，在之后的编程中不会想去更改元组，不然程序员就会用列表了。</p>
</blockquote>
<h4 id="关于全局变量"><a href="#关于全局变量" class="headerlink" title="@关于全局变量"></a>@关于全局变量</h4><pre><code class="python">def main():
    global FpsClock, Screen
    pygame.init()
    FpsClock = pygame.time.Clock()
    Screen = pygame.display.set_mode((window_x, window_y))
    pygame.display.set_caption(&quot;Memory Puzzle&quot;)
</code></pre>
<p>&emsp;&emsp;之所以使用全局变量是因为在其他的函数我们需要使用它，所以呢声明为全局变量<code>FpsClock</code>、<code>Screen</code>。<br>&emsp;&emsp;但是，过多的全局变量并不是优点，这会让程序容易起BUG，因为可能在某个函数中修改了这个全局变量，导致游戏崩溃，那么该去哪里找这个变量修改的位置呢，答案是很难，除非几个函数，但是大量的函数中，你能记得起哪里修改了，那么你很特别，非常的有慧根，那就来玩这款游戏吧！！！</p>
<h3 id="主函数"><a href="#主函数" class="headerlink" title="#主函数"></a>#主函数</h3><blockquote>
<p>我们开始进入主函数讲解部分，代码按顺序讲。</p>
</blockquote>
<h4 id="数据结构"><a href="#数据结构" class="headerlink" title="@数据结构"></a>@数据结构</h4><pre><code class="python">mainBoard = getRandomizedBoard()
revealedBoxes = generateRevealedBoxesData(False)
</code></pre>
<p>&emsp;&emsp;<code>getRandomizedBoard()</code>函数返回一个数据结构，表示当前游戏面板的状态。<code>generateRevealedBoxesData(False)</code>这个函数返回一个数据结构，表示当前哪些方块被遮盖了。这些返回值都是2D列表。</p>
<center><img src="https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/Memory%20Puzzle/1-2.png" alt="数据结构"></center>

<p>例如：</p>
<pre><code class="python">mainBoard = [[(DONUT, BULE), (LINES, BULE), (SQUARE, ORANGE)],[(SQUARE, GREEN), (DONUT, BULE), (DIAMOND, YELLOW)],
            [(SQUARE, GREEN), (OVAL, YELLOW), (SQUARE, ORANGE)],[(DIAMOND, YELLOW), (LINES, BULE), (OVAL, YELLOW)]]
</code></pre>
<p>&emsp;&emsp;上面的栗子是一个4X3的游戏板。这个时候我们通过<code>mainBoard[i][j]</code>就可以得出那个图案与颜色元组了，例如<code>mainBoard[2][1]</code>取出来就是<code>(SQUARE, GREEN)</code>这个元组值，要是不清楚可以先学学python的语法吧，这里我不多赘述了。毕竟游戏要紧，要是真的不会，可以在下方留言里提问。</p>
<h4 id="开始游戏动画"><a href="#开始游戏动画" class="headerlink" title="@开始游戏动画"></a>@开始游戏动画</h4><pre><code class="python">mouse_x = 0 # 用于存储鼠标X轴像素
mouse_y = 0 # 用于存储鼠标Y轴像素
firstSelection = None
Screen.fill(bgColor)
starGameAnimation(mainBoard)
</code></pre>
<p>&emsp;&emsp;<code>firstSelection</code>这个变量我们用来存储玩家第一个点击的方块，把<code>(mouse_x, mouse_y)</code>存到这里面。<code>Screen.fill(bgColor)</code>是用于渲染背景的，填充bgColor颜色，他是一个元组形式的值。例如上面的颜色变量。<code>starGameAnimation(mainBoard)</code>这个函数是用来为游戏提供动画效果。具体的慢慢看下去。</p>
<h4 id="游戏主循环"><a href="#游戏主循环" class="headerlink" title="@游戏主循环"></a>@游戏主循环</h4><pre><code class="python">while True:
    mouseClicked = False
    Screen.fill(bgColor)
    drawBoard(mainBoard, revealedBoxes)

    keys = pygame.key.get_pressed()
    for event in pygame.event.get():
        if event.type == QUIT or keys[K_ESCAPE]:
            pygame.quit()
            sys.exit()
        elif event.type == MOUSEMOTION:
            mouse_x, mouse_y = event.pos
        elif event.type == MOUSEBUTTONUP:
            mouse_x, mouse_y = event.pos
            mouseClicked = True
</code></pre>
<p>&emsp;&emsp;一个游戏是通过不断的循环而刷新游戏界面的，所以我们会使用<code>while True:</code>来使我们的游戏循环起来。但是游戏一旦进入循环怎么退出呢？这就要使用到输入的问题了，一般来说玩家点击关闭窗口按钮后，或者点击<code>Esc</code>键时，游戏会退出，当然你可以自定义键，不过还是按常规出牌的好，不然玩家不玩你游戏了。你还怎么嘿嘿嘿。<br>&emsp;&emsp;因而，我们使用一个循环<code>for event in pygame.event.get():</code>来处理事件，<code>pygame.event.get()</code>是获取游戏的全部事件，呈线性吧，一条一条取出来存到<code>event</code>里。后面的代码我相信不用解释了吧，应该通俗易懂了。不过要提一下的是<code>event.pos</code>返回一个元组，代表鼠标在窗口的位置。<br><code>MOUSEMOTION</code>是鼠标移动，<code>MOUSEBUTTONUP</code>是鼠标摁下后释放。</p>
<h4 id="鼠标定位"><a href="#鼠标定位" class="headerlink" title="@鼠标定位"></a>@鼠标定位</h4><pre><code class="python">box_x, box_y = getBoxAtPixel(mouse_x, mouse_y)
if box_x != None and box_y != None:
    if not revealedBoxes[box_x][box_y]:
        drawHighlightBox(box_x, box_y)
    if not revealedBoxes[box_x][box_y] and mouseClicked:
        revealBoxesAnimation(mainBoard, [(box_x, box_y)])
        revealedBoxes[box_x][box_y] = True
</code></pre>
<p>&emsp;&emsp;<code>getBoxAtPixel(mouse_x, mouse_y)</code>这个函数返回俩个整数元组，把像素值转化为方块位置（例如：(1,1)），表示当前鼠标位于哪一个白色方块上，这有利于我们对<code>mainBoard</code>传入(1，1)（mainBoard[1][1]）取方块。若鼠标不在方块上，则返回(None, None)。<br>&emsp;&emsp;<code>revealedBoxes[box_x][box_y]</code>这个函数是表示鼠标点击的方块是否被遮盖。如果没有遮盖就为这个方块打高光<code>drawHighlightBox(box_x, box_y)</code>，提示用户鼠标在方块上。</p>
<center><img src="https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/Memory%20Puzzle/1-3.png" alt="数据结构"></center>

<p>&emsp;&emsp;<code>revealBoxesAnimation(mainBoard, [(box_x, box_y)])</code>函数是当用户点击并且当前方块没有被遮盖（没有匹配过）时，播放白色方块消失的动画，传入的列表代表点击的那个方块位置。<code>revealedBoxes[box_x][box_y] = True</code>这个表示那个位置的方块无遮盖了，这个变量负责记录游戏状态已经更新的数据结构。</p>
<h4 id="处理第一次点击"><a href="#处理第一次点击" class="headerlink" title="@处理第一次点击"></a>@处理第一次点击</h4><pre><code class="python">if firstSelection == None:
    firstSelection = (box_x, box_y)
else:
    icon1shape, icon1color = getShapeAndColor(mainBoard, firstSelection[0], firstSelection[1])
    icon2shape, icon2color = getShapeAndColor(mainBoard, box_x, box_y)
</code></pre>
<p>&emsp;&emsp;这里判断玩家有没有点击方块，因为一开始我们把<code>firstSelection</code>设为None，所以先存下我们第一次点击的图案和颜色。然后程序因为是<strong>一直循环</strong>，当第二次点击时，if语句判断为False，所以进入到else语句，使用<code>getShapeAndColor(mainBoard, firstSelection[0], firstSelection[1])</code>这个函数返回点击方块下的图案与颜色。所以返回我们第一次点击的和第二次点击的图案和颜色。</p>
<h4 id="处理匹配"><a href="#处理匹配" class="headerlink" title="@处理匹配"></a>@处理匹配</h4><pre><code class="python">if icon1shape != icon2shape or icon1color != icon2color:
    pygame.time.wait(500)
    coverBoxesAnimation(mainBoard, [(firstSelection[0], firstSelection[1]), (box_x, box_y)])
    revealedBoxes[firstSelection[0]][firstSelection[1]] = False
    revealedBoxes[box_x][box_y] = False
elif hasWon(revealedBoxes):
    gameWonAnimation(mainBoard)
    pygame.time.wait(500)

    mainBoard = getRandomizedBoard()
    revealedBoxes = generateRevealedBoxesData(False)

    drawBoard(mainBoard, revealedBoxes)
    pygame.display.update()
    pygame.time.wait(500)

    starGameAnimation(mainBoard)
firstSelection = None
</code></pre>
<p>&emsp;&emsp;接着上面，我们就要判断两次点击是否匹配。<code>pygame.time.wait(500)</code>这里我们让游戏停止500ms，为的是让玩家认识到自己匹配不成功，显示图案500ms让玩家记住。然后<code>coverBoxesAnimation(mainBoard, [(firstSelection[0], firstSelection[1]), (box_x, box_y)])</code>这个函数把不匹配的一对方块遮盖，之后我们把之前标记游戏状态的变量<code>revealedBoxes</code>让不匹配图案变为False（即没点击过）<br>&emsp;&emsp;如果玩家点击的是最后一对，我们可以用<code>gameWonAnimation(mainBoard)</code>来检测玩家赢与否，赢了的话，那么<code>gameWonAnimation(mainBoard)</code>函数绘制赢后的动画效果。等待500ms后，重新刷新游戏板，<code>getRandomizedBoard()</code>、<code>drawBoard(mainBoard, revealedBoxes)</code>函数用于生成随机图案组合来开始新的一局，返回列表的列表（即2D“数组”）。然后<code>pygame.display.update()</code>是用来刷新屏幕的，因为我们开始了新的一局。<br>&emsp;&emsp;我们还有一种情况是匹配了，但是游戏还要继续，所以我们直接用一句<code>firstSelection = None</code>来表示下一次匹配。因为游戏一直循环嘛。</p>
<h4 id="刷新游戏"><a href="#刷新游戏" class="headerlink" title="@刷新游戏"></a>@刷新游戏</h4><pre><code class="python">pygame.display.update()
FpsClock.tick(FPS)
</code></pre>
<p>&emsp;&emsp;这里我们使用屏幕刷新和限制游戏帧率来对我们电脑好一点，不然电脑会以最快的速度运行这个游戏，帧数估计上千，电脑立马发热，所以我们要把帧数调整为合适的值。<code>FpsClock.tick(FPS)</code>这个函数用于限制游戏循环速度，每秒30帧。在主函数一开头<code>FpsClock = pygame.time.Clock()</code>我们声明了FpsClock并且设为全局变量。</p>
<h3 id="枝叶辅助函数"><a href="#枝叶辅助函数" class="headerlink" title="#枝叶辅助函数"></a>#枝叶辅助函数</h3><blockquote>
<p>我们开始进入主函数没有实现的辅助函数，这样写有利于我们知道游戏骨架，然后慢慢修饰枝叶。在开发中这种方法非常有用。共勉！</p>
</blockquote>
<h4 id="揭开方块"><a href="#揭开方块" class="headerlink" title="@揭开方块"></a>@揭开方块</h4><pre><code class="python">def generateRevealedBoxesData(val):
    revealedBoxes = []
    for i in range(boardWidth):
        revealedBoxes.append([val] * boardHeight)
    return revealedBoxes
</code></pre>
<p>&emsp;&emsp;<code>generateRevealedBoxesData(False)</code>在主函数中，我们一开始是这样传入val参数，我们利用boardWidth值来循环多少次，我们创建的是垂直列，这才符合[x][y]的感觉，不然就要反人类的使用[y][x]来表示水平行了。传入的False代表方块未被点击过，即遮盖状态。我们使用<code>append</code>来<strong>追加</strong>后面的数据集。然后返回这个游戏板到mainBoard。</p>
<h4 id="获取所有图标"><a href="#获取所有图标" class="headerlink" title="@获取所有图标"></a>@获取所有图标</h4><pre><code class="python">def getRandomizedBoard():
    icons = []
    for color in allColors:
        for shape in allShapes:
            icons.append((shape, color))

    random.shuffle(icons)
    numIconUsed = int(boardWidth * boardHeight / 2)
    icons = icons[:numIconUsed] * 2
    random.shuffle(icons)

    board = []
    for x in range(boardWidth):
        column = []
        for y in range(boardHeight):
            column.append(icons[0])
            del icons[0]
        board.append(column)
    return board
</code></pre>
<p>&emsp;&emsp;这里我们实现了随机生成游戏面板图案和颜色。使用<code>icons</code>来记录我们的图案和颜色集合。然后打乱这些集合<code>random.shuffle(icons)</code>，之后因为我们需要一对，之前只生成了每样一个，所以我们需要复制以下每一个样式，<code>icons = icons[:numIconUsed] * 2</code>，这就生成了每样一对了。然后再次打乱。<br>&emsp;&emsp;之后我们使用board来保存我们的图案样式，通过<strong>追加</strong>方式添加icons的第一组样式，然后通过<code>del</code>来剔除添加过后的样式，这样所有的样式就会向前移动一个位置。</p>
<blockquote>
<p><strong>什么是剔除？</strong><br><img src="https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/Memory%20Puzzle/1-4.png" alt="剔除图"></p>
</blockquote>
<h4 id="开始动画"><a href="#开始动画" class="headerlink" title="@开始动画"></a>@开始动画</h4><pre><code class="python">def starGameAnimation(board):
    pygame.time.wait(500)
    coveredBoxes = generateRevealedBoxesData(False)
    boxes = []
    for x in range(boardWidth):
        for y in range(boardHeight):
            boxes.append((x, y))
    random.shuffle(boxes)
    boxGroups = __splitIntoGroupsOf(15, boxes)

    drawBoard(board, coveredBoxes)
    for boxGroup in boxGroups:
        revealBoxesAnimation(board, boxGroup)
        coverBoxesAnimation(board, boxGroup)
</code></pre>
<p>&emsp;&emsp;这里我们讲解开始动画的实现，我们把(x, y)元组添加到boxes里面，然后打乱boxes元组，然后通过<code>__splitIntoGroupsOf(15, boxes)</code>函数来切割整个boxes元组，分为15个一组（后面不足15就少一点为一组），函数返回一个以15个元组为一列的列表。然后遍历这个列表，有几组就几次，调用<code>revealBoxesAnimation(board, boxGroup)</code>、<code>coverBoxesAnimation(board, boxGroup)</code>来显示和隐藏白色方块。</p>
<h4 id="切割列表"><a href="#切割列表" class="headerlink" title="@切割列表"></a>@切割列表</h4><pre><code class="python">def __splitIntoGroupsOf(groupSize, theList):
    result = []
    for i in range(0, len(theList), groupSize):
        result.append(theList[i:i + groupSize])
    return result
</code></pre>
<p>&emsp;&emsp;这个函数不在主函数中，我就添加了<code>__</code>这个东西来标记辅助函数，这个函数把传入的列表List切割成几份。<code>range(0, len(theList), groupSize)</code>表示0-整个List长度，并且步长为groupSize，例如一个列表有5个，步长为2.那么就分为0，2，4，5。即List[0:2],List[2:4],List[4:5]这四份，存储在result中返回。</p>
<h4 id="像素转换坐标"><a href="#像素转换坐标" class="headerlink" title="@像素转换坐标"></a>@像素转换坐标</h4><pre><code class="python">def getBoxAtPixel(x, y):
    for box_x in range(boardWidth):
        for box_y in range(boardHeight):
            left, top = __leftTopCoordsOfBox(box_x, box_y)
            boxRect = pygame.Rect(left, top, boxSize, boxSize)
            if boxRect.collidepoint(x, y):
                return (box_x, box_y)
    return (None, None)
</code></pre>
<p>&emsp;&emsp;因为我们需要计算鼠标是否在某个方块上，所以需要把像素转换为我们游戏方块坐标，因此通过这个函数实现，<code>__leftTopCoordsOfBox(box_x, box_y)</code>该函数返回方块的<strong>左边和顶部</strong>像素位置，然后用<code>pygame.Rect(left, top, boxSize, boxSize)</code>返回一个方块的对象，该对象有许多变量，例如：<code>boxRect.size</code>、<code>boxRect.width</code>等等。接着判断鼠标(x, y)是否与方块重叠（即是否发生碰撞<code>boxRect.collidepoint(x, y)</code>）是的话返回这个方块的坐标位置，这就实现了转换。若鼠标不在方块上，就返回(None, None)。</p>
<h4 id="获取左边和顶部"><a href="#获取左边和顶部" class="headerlink" title="@获取左边和顶部"></a>@获取左边和顶部</h4><pre><code class="python">def __leftTopCoordsOfBox(box_x, box_y):
    left = box_x * (boxSize + gapSize) + xMargin
    top = box_y * (boxSize + gapSize) + yMargin
    return (left, top)
</code></pre>
<p>&emsp;&emsp;函数返回一个(left, top)的元组。<code>xMargin</code>、<code>yMargin</code>这俩变量在幻数那一节提到，但没具体分析，这里讲一下他是干嘛的：顾名思义，他是游戏面板与窗口的外间距。x代表与左边窗口的，y是上边窗口的。</p>
<center><img src="https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/Memory%20Puzzle/1-5.png" alt="示意图"></center>

<h4 id="遮盖与揭开"><a href="#遮盖与揭开" class="headerlink" title="@遮盖与揭开"></a>@遮盖与揭开</h4><pre><code class="python">def coverBoxesAnimation(board, boxesToCover):
    for coverage in range(0, boxSize + starevealSpeed, starevealSpeed):
        __drawBoxCovers(board, boxesToCover, coverage)
</code></pre>
<p>&emsp;&emsp;这里又运用到了<code>range</code>的功能，我们以方块为全部长度，<em>加上遮盖速度是为了最后的步长加上它后刚好使方块遮住</em>，因为动画使一帧一帧实现的，我们就可以利用我们眼睛的残像来制作动画效果。</p>
<hr>
<pre><code class="python">def revealBoxesAnimation(board, boxesToReveal):
    for coverage in range(boxSize, -1, -revealSpeed):
        __drawBoxCovers(board, boxesToReveal, coverage)
</code></pre>
<p>&emsp;&emsp;和遮盖一样的道理，从方块大小开始依次递减来绘画出动画。这里我把遮盖和揭开速度设成2和5，方便遮盖时玩家能有充足的时间记忆，揭开动画快点是省时间。</p>
<h4 id="绘制遮盖方块"><a href="#绘制遮盖方块" class="headerlink" title="@绘制遮盖方块"></a>@绘制遮盖方块</h4><pre><code class="python">def __drawBoxCovers(board, boxes, coverage):
    for box in boxes:
        left, top = __leftTopCoordsOfBox(box[0], box[1])
        pygame.draw.rect(Screen, bgColor, (left, top, boxSize, boxSize))
        shape, color = getShapeAndColor(board, box[0], box[1])
        __drawIcon(shape, color, box[0], box[1])
        if coverage &gt; 0:
            pygame.draw.rect(Screen, boxColor, (left, top, coverage, boxSize))
    pygame.display.update()
    FpsClock.tick(FPS)
</code></pre>
<p>&emsp;&emsp;我们通过pygame自带的画图函数<code>pygame.draw.rect(Screen, bgColor, (left, top, boxSize, boxSize))</code>来画一个矩形，第一个参数表示在哪里画，之后是什么颜色，表示方位、大小的一个元组。<code>getShapeAndColor(board, box[0], box[1])</code>该函数读取游戏板后返回(形状， 颜色)元组。然后<code>__drawIcon(shape, color, box[0], box[1])</code>用来绘制每个图案与颜色。如果遮盖<code>coverage</code>没有弄完，就继续生成矩形来生成一系列动画。</p>
<h4 id="获取样式"><a href="#获取样式" class="headerlink" title="@获取样式"></a>@获取样式</h4><pre><code class="python">def getShapeAndColor(board, box_x, box_y):
    return board[box_x][box_y][0], board[box_x][box_y][1]
</code></pre>
<p>&emsp;&emsp;这里通过之前存储的图案元组，返回相应位置的样式。</p>
<h4 id="绘制图案（核心）"><a href="#绘制图案（核心）" class="headerlink" title="@绘制图案（核心）"></a>@绘制图案（核心）</h4><pre><code class="python">def __drawIcon(shape, color, box_x, box_y):
    quarter = int(boxSize * 0.25)
    half = int(boxSize * 0.5)

    left, top = __leftTopCoordsOfBox(box_x, box_y)

    if shape == Donut:
        pygame.draw.circle(Screen, color, (left + half, top + half), half - 5)
        pygame.draw.circle(Screen, bgColor, (left + half, top + half), quarter - 5)
    elif shape == Square:
        pygame.draw.rect(Screen, color, (left + quarter, top + quarter, boxSize - half, boxSize - half))
    elif shape == Diamond:
        pygame.draw.polygon(Screen, color, (
        (left + half, top), (left + boxSize - 1, top + half), (left + half, top + boxSize - 1), (left, top + half)))
    elif shape == Lines:
        for i in range(0, boxSize, 10):
            pygame.draw.line(Screen, color, (left, top + i), (left + i, top))
            pygame.draw.line(Screen, color, (left + i, top + boxSize - 1), (left + boxSize - 1, top + i))
    elif shape == Oval:
        pygame.draw.ellipse(Screen, color, (left, top + quarter, boxSize, half))
</code></pre>
<p>&emsp;&emsp;到了这一步，就是体现我们数学绘画的关键核心步骤了，如果你数学好，对图形了解特别清楚，那么这里你可以随便添加自己想要的图形，那么我这里给出了栗子。通过<code>quarter</code>、<code>half</code>来存储1/4和1/2处的像素。然后判断我们读取的图案是什么形状，绘制相应图案。这个你们自己看着办吧。一一解释有些累赘。其实我就是想掩盖数学垃圾的事实，别说出来。相信你们可以盲目分析出来。</p>
<h4 id="绘制游戏板"><a href="#绘制游戏板" class="headerlink" title="@绘制游戏板"></a>@绘制游戏板</h4><pre><code class="python">def drawBoard(board, revealed):
    for box_x in range(boardWidth):
        for box_y in range(boardHeight):
            left, top = __leftTopCoordsOfBox(box_x, box_y)
            if not revealed[box_x][box_y]:
                pygame.draw.rect(Screen, boxColor, (left, top, boxSize, boxSize))
            else:
                shape, color = getShapeAndColor(board, box_x, box_y)
                __drawIcon(shape, color, box_x, box_y)
</code></pre>
<p>&emsp;&emsp;这个函数针对每一个方块都调用一次<code>__drawIcon(shape, color, box_x, box_y)</code>，遍历每一个方块，绘制完后绘制一个白色方块遮住。</p>
<h4 id="打高光"><a href="#打高光" class="headerlink" title="@打高光"></a>@打高光</h4><pre><code class="python">def drawHighlightBox(box_x, box_y):
    left, top = __leftTopCoordsOfBox(box_x, box_y)
    pygame.draw.rect(Screen, highlightColor, (left - 5, top - 5, boxSize + 10, boxSize + 10), 4)
</code></pre>
<p>&emsp;&emsp;这个函数在之前提到过，用于鼠标悬停在某一方块上时，高亮当前方块。</p>
<h4 id="判断输赢"><a href="#判断输赢" class="headerlink" title="@判断输赢"></a>@判断输赢</h4><pre><code class="python">def hasWon(revealedBoxes):
    for i in revealedBoxes:
        if False in i:
            return False
    return True
</code></pre>
<p>&emsp;&emsp;该函数通过取每个方块的标志，<code>revealedBoxes</code>这个表示游戏状态表示的变量记录是否被揭开。若每个方块都被揭开，那么该游戏就判断为赢了。其中运用<code>if False in i</code>语句来匹配<code>i</code>是否有False。</p>
<h4 id="绘制赢后动画"><a href="#绘制赢后动画" class="headerlink" title="@绘制赢后动画"></a>@绘制赢后动画</h4><pre><code class="python">def gameWonAnimation(board):
    coveredBoxes = generateRevealedBoxesData(True)
    color1 = lightbgColor
    color2 = bgColor

    for i in range(5):
        color1, color2 = color2, color1
        Screen.fill(color1)
        drawBoard(board, coveredBoxes)
        __print_text(font_1, window_x / 6 + 50, window_y / 8, &#39;You Win!&#39;)
        pygame.display.update()
        pygame.time.wait(500)
</code></pre>
<p>&emsp;&emsp;我们把每个方块的标志<code>revealedBoxes</code>都置为True，然后通过画面闪动颜色来表示赢了。<code>range(5)</code>表示闪动5次，然后用<code>__print_text(font_1, window_x / 6 + 50, window_y / 8, &#39;You Win!&#39;)</code>函数来打印文字。之后刷新游戏屏幕，每次刷新等500ms。</p>
<h4 id="打印文字"><a href="#打印文字" class="headerlink" title="@打印文字"></a>@打印文字</h4><pre><code class="python">def __print_text(font, x, y, text, color=(255, 255, 255)):
    imgText = font.render(text, True, color)
    Screen.blit(imgText, (x, y))
</code></pre>
<p>&emsp;&emsp;我们运用pygame库里的字体函数<code>render</code>来渲染我们的文字，以此来显示在我们的窗口上。不过在之前需要初始化以下。如下代码。</p>
<pre><code class="python">pygame.font.init()
font_1 = pygame.font.Font(None, 60) # None表示使用默认字体，60表示文字大小
</code></pre>
<h3 id="源代码"><a href="#源代码" class="headerlink" title="#源代码"></a>#源代码</h3><pre><code class="python">import pygame, sys, random
from pygame.locals import *

window_x = 640
window_y = 480
FPS = 30
revealSpeed = 5
starevealSpeed = 2
boxSize = 50
gapSize = 10
boardWidth = 8
boardHeight = 5
assert (boardWidth * boardHeight) % 2 == 0, &#39;Board needs to have an even number of boxes for pairs of matches.&#39;
xMargin = int((window_x - (boardWidth * (boxSize + gapSize))) / 2)
yMargin = int((window_y - (boardHeight * (boxSize + gapSize))) / 2)

#            R    G    B
Gray     = (100, 100, 100)
Navyblue = (60,   60, 100)
White    = (255, 255, 255)
Red      = (255,   0,   0)
Green    = (0,   255,   0)
Blue     = (0,     0, 255)
Yellow   = (255, 255,   0)
Orange   = (255, 128,   0)
Purple   = (255,   0, 255)
Cyan     = (0,   255, 255)

pygame.font.init()
font_1 = pygame.font.Font(None, 60)

bgColor = Navyblue
lightbgColor = Gray
boxColor = White
highlightColor = Cyan

Donut = &#39;donut&#39;
Square = &#39;square&#39;
Diamond = &#39;diamond&#39;
Lines = &#39;lines&#39;
Oval = &#39;oval&#39;

allColors = (Red, Green, Blue, Yellow, Orange, Purple, Cyan)
allShapes = (Donut, Square, Diamond, Lines, Oval)
assert len(allColors) * len(
    allShapes) * 2 &gt;= boardWidth * boardHeight, &#39;Board is too big for the number of shapes/color defined.&#39;


def __print_text(font, x, y, text, color=(255, 255, 255)):
    imgText = font.render(text, True, color)
    Screen.blit(imgText, (x, y))


def __splitIntoGroupsOf(groupSize, theList):
    result = []
    for i in range(0, len(theList), groupSize):
        result.append(theList[i:i + groupSize])
    return result


def __drawBoxCovers(board, boxes, coverage):
    for box in boxes:
        left, top = __leftTopCoordsOfBox(box[0], box[1])
        pygame.draw.rect(Screen, bgColor, (left, top, boxSize, boxSize))
        shape, color = getShapeAndColor(board, box[0], box[1])
        __drawIcon(shape, color, box[0], box[1])
        if coverage &gt; 0:
            pygame.draw.rect(Screen, boxColor, (left, top, coverage, boxSize))
    pygame.display.update()
    FpsClock.tick(FPS)


def __leftTopCoordsOfBox(box_x, box_y):
    left = box_x * (boxSize + gapSize) + xMargin
    top = box_y * (boxSize + gapSize) + yMargin
    return (left, top)


def __drawIcon(shape, color, box_x, box_y):
    quarter = int(boxSize * 0.25)
    half = int(boxSize * 0.5)

    left, top = __leftTopCoordsOfBox(box_x, box_y)

    if shape == Donut:
        pygame.draw.circle(Screen, color, (left + half, top + half), half - 5)
        pygame.draw.circle(Screen, bgColor, (left + half, top + half), quarter - 5)
    elif shape == Square:
        pygame.draw.rect(Screen, color, (left + quarter, top + quarter, boxSize - half, boxSize - half))
    elif shape == Diamond:
        pygame.draw.polygon(Screen, color, (
        (left + half, top), (left + boxSize - 1, top + half), (left + half, top + boxSize - 1), (left, top + half)))
    elif shape == Lines:
        for i in range(0, boxSize, 10):
            pygame.draw.line(Screen, color, (left, top + i), (left + i, top))
            pygame.draw.line(Screen, color, (left + i, top + boxSize - 1), (left + boxSize - 1, top + i))
    elif shape == Oval:
        pygame.draw.ellipse(Screen, color, (left, top + quarter, boxSize, half))


# in main function
def getRandomizedBoard():
    icons = []
    for color in allColors:
        for shape in allShapes:
            icons.append((shape, color))

    random.shuffle(icons)
    numIconUsed = int(boardWidth * boardHeight / 2)
    icons = icons[:numIconUsed] * 2
    random.shuffle(icons)

    board = []
    for x in range(boardWidth):
        column = []
        for y in range(boardHeight):
            column.append(icons[0])
            del icons[0]
        board.append(column)
    return board


def generateRevealedBoxesData(val):
    revealedBoxes = []
    for i in range(boardWidth):
        revealedBoxes.append([val] * boardHeight)
    return revealedBoxes


def starGameAnimation(board):
    pygame.time.wait(500)
    coveredBoxes = generateRevealedBoxesData(False)
    boxes = []
    for x in range(boardWidth):
        for y in range(boardHeight):
            boxes.append((x, y))
    random.shuffle(boxes)
    boxGroups = __splitIntoGroupsOf(15, boxes)

    drawBoard(board, coveredBoxes)
    for boxGroup in boxGroups:
        revealBoxesAnimation(board, boxGroup)
        coverBoxesAnimation(board, boxGroup)


def coverBoxesAnimation(board, boxesToCover):
    for coverage in range(0, boxSize + starevealSpeed, starevealSpeed):
        __drawBoxCovers(board, boxesToCover, coverage)


def drawBoard(board, revealed):
    for box_x in range(boardWidth):
        for box_y in range(boardHeight):
            left, top = __leftTopCoordsOfBox(box_x, box_y)
            if not revealed[box_x][box_y]:
                pygame.draw.rect(Screen, boxColor, (left, top, boxSize, boxSize))
            else:
                shape, color = getShapeAndColor(board, box_x, box_y)
                __drawIcon(shape, color, box_x, box_y)


def getBoxAtPixel(x, y):
    for box_x in range(boardWidth):
        for box_y in range(boardHeight):
            left, top = __leftTopCoordsOfBox(box_x, box_y)
            boxRect = pygame.Rect(left, top, boxSize, boxSize)
            if boxRect.collidepoint(x, y):
                return (box_x, box_y)
    return (None, None)


def drawHighlightBox(box_x, box_y):
    left, top = __leftTopCoordsOfBox(box_x, box_y)
    pygame.draw.rect(Screen, highlightColor, (left - 5, top - 5, boxSize + 10, boxSize + 10), 4)


def getShapeAndColor(board, box_x, box_y):
    return board[box_x][box_y][0], board[box_x][box_y][1]


def revealBoxesAnimation(board, boxesToReveal):
    for coverage in range(boxSize, -1, -revealSpeed):
        __drawBoxCovers(board, boxesToReveal, coverage)


def hasWon(revealedBoxes):
    for i in revealedBoxes:
        if False in i:
            return False
    return True


def gameWonAnimation(board):
    coveredBoxes = generateRevealedBoxesData(True)
    color1 = lightbgColor
    color2 = bgColor

    for i in range(5):
        color1, color2 = color2, color1
        Screen.fill(color1)
        drawBoard(board, coveredBoxes)
        __print_text(font_1, window_x / 6 + 50, window_y / 8, &#39;You Win!&#39;)
        pygame.display.update()
        pygame.time.wait(500)


def main():
    global FpsClock, Screen
    pygame.init()
    FpsClock = pygame.time.Clock()
    Screen = pygame.display.set_mode((window_x, window_y))
    pygame.display.set_caption(&quot;Memory Puzzle&quot;)

    mouse_x = 0
    mouse_y = 0

    mainBoard = getRandomizedBoard()
    revealedBoxes = generateRevealedBoxesData(False)

    firstSelection = None
    Screen.fill(bgColor)
    starGameAnimation(mainBoard)

    while True:
        mouseClicked = False
        Screen.fill(bgColor)
        drawBoard(mainBoard, revealedBoxes)

        keys = pygame.key.get_pressed()
        for event in pygame.event.get():
            if event.type == QUIT or keys[K_ESCAPE]:
                pygame.quit()
                sys.exit()
            elif event.type == MOUSEMOTION:
                mouse_x, mouse_y = event.pos
            elif event.type == MOUSEBUTTONUP:
                mouse_x, mouse_y = event.pos
                mouseClicked = True

        box_x, box_y = getBoxAtPixel(mouse_x, mouse_y)
        if box_x != None and box_y != None:
            if not revealedBoxes[box_x][box_y]:
                drawHighlightBox(box_x, box_y)
            if not revealedBoxes[box_x][box_y] and mouseClicked:
                revealBoxesAnimation(mainBoard, [(box_x, box_y)])
                revealedBoxes[box_x][box_y] = True
                if firstSelection == None:
                    firstSelection = (box_x, box_y)
                else:
                    icon1shape, icon1color = getShapeAndColor(mainBoard, firstSelection[0], firstSelection[1])
                    icon2shape, icon2color = getShapeAndColor(mainBoard, box_x, box_y)
                    if icon1shape != icon2shape or icon1color != icon2color:
                        pygame.time.wait(500)
                        coverBoxesAnimation(mainBoard, [(firstSelection[0], firstSelection[1]), (box_x, box_y)])
                        revealedBoxes[firstSelection[0]][firstSelection[1]] = False
                        revealedBoxes[box_x][box_y] = False
                    elif hasWon(revealedBoxes):
                        gameWonAnimation(mainBoard)
                        pygame.time.wait(500)

                        mainBoard = getRandomizedBoard()
                        revealedBoxes = generateRevealedBoxesData(False)

                        drawBoard(mainBoard, revealedBoxes)
                        pygame.display.update()
                        pygame.time.wait(500)

                        starGameAnimation(mainBoard)
                    firstSelection = None

        pygame.display.update()
        FpsClock.tick(FPS)


if __name__ == &#39;__main__&#39;:
    main()
</code></pre>

        
                <blockquote style="margin: 2em 0 0;padding: 0.5em 1em;border-left: 3px solid #F44336;background-color: #F5F5F5;list-style: none;">
                    <p><strong>
                         
                            我对死亡感到唯一的痛苦是没能为爱而死
                        </strong>
                        <br>
                        <strong>本文链接：</strong><a href="http://congtsang.com/2018/03/23/Memory-Puzzle-Game/">http://congtsang.com/2018/03/23/Memory-Puzzle-Game/</a>
                    </p>
                </blockquote>
        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <div id="comment" style='padding:10px;' class="vcomment"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = '名字被我吃了,邮箱不见了,你的主页也被我吞了'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = 'false' == true;
    var verify = 'true' == true;
    new Valine({
        el: '.vcomment',
        notify: notify,
        verify: verify,
        appId: "5vV33L0HXsTxM6eMqXoNmoUj-gzGzoHsz",
        appKey: "7UJciGWv3fPL0OsLxh86UVQr",
        placeholder: "小姐姐小哥哥啊~你掉的是这个金色的评论，还是这个银色的评论，还是这个帅气酷酷的评论呢？",
        pageSize:'10',
        avatar:'wavatar',
        lang:'zh-cn'
    });
</script>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2018/03/19/ナミヤ雑貨店の奇蹟/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="https://congtsang-1253786822.cos.ap-hongkong.myqcloud.com/CongTsang/avatar.jpg" alt="CongTsang's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        543052251@email.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: 543052251@qq.com" target="_blank" title="报告奴才">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        报告奴才
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">一月 2018<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/11/">十一月 2017<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Learning/">Learning<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/categories/灵魂读者/">灵魂读者<span class="sidebar_archives-count">4</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="http://congtsang.com/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">turned_in</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="http://congtsang.com/timeline" title="时间线">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                时间线
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="http://congtsang.com/about" title="关于">
                
                    <i class="material-icons sidebar-material-icons">face</i>
                
                关于
            </a>
        </li>
        
    
        <li>
            <a href="http://congtsang.com/links" title="友链">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                友链
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">12</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/CongTsang" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/cong.tsang.3?ref=bookmarks" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    
        <a href="https://weibo.com/3025630142/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-weibo">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    
        <a href="https://www.instagram.com/congtsang/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-instagram">
                <span class="visuallyhidden">Instagram</span>
            </button><!--
     --></a>
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/CongTsang" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    
        <a href="https://www.zhihu.com/people/congtsang/activities" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-zhihu">
                <span class="visuallyhidden">Zhihu</span>
            </button><!--
     --></a>
    

    <!-- Bilibili -->
    
        <a href="https://space.bilibili.com/11728607/#!/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-bilibili">
                <span class="visuallyhidden">Bilibili</span>
            </button><!--
     --></a>
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2016&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>CongTsang丨Inn
            
                <br>
                
                    <a href="http://www.miitbeian.gov.cn" rel="nofollow">湘ICP备17014623号</a>
                
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/js/lazyload.min.js", true)</script>



    <script>lsloader.load("js_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/js/js.min.js", true)</script>



    <script>lsloader.load("np_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/js/nprogress.js", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#1047A9'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #1047A9, 0 0 15px #1047A9'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#1047A9',
        'border-left-color': '#1047A9'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 500);
</script>



    
        <script>lsloader.load("sm_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/js/smoothscroll.js", true)</script>
    



    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('5vV33L0HXsTxM6eMqXoNmoUj-gzGzoHsz', '7UJciGWv3fPL0OsLxh86UVQr');
    </script>
    <script type="text/ls-javascript" id="leancloud-views-script">
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>






   





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->


    
        <script>lsloader.load("hanabi","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/js/hanabi-browser-bundle.js", true)</script>
    


<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
        
        
        HanabiBrowser.start('pre code',false);
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
